# v0.6: Python and Node SDKs

**Status**: Complete

**Theme**: First-class language support for the two largest AI ecosystems.

SDKs ship right after MCP (v0.5.3) so Python and Node developers can use Strata immediately.

---

## Repository Strategy

SDKs live in **separate repositories** for:

1. **Licensing flexibility**: strata-core is Apache 2.0; SDKs are MIT for max adoption
2. **Independent release cadence**: SDKs can iterate faster than core database
3. **Cleaner dependencies**: SDKs depend on strata-core, not vice versa
4. **Language-specific tooling**: Each repo uses idiomatic build tools (maturin, napi-rs)

```
strata-systems/strata-core    # Core database (Apache 2.0)
strata-systems/strata-mcp     # MCP server (MIT)
strata-systems/strata-python  # Python SDK (MIT)
strata-systems/strata-node    # Node.js SDK (MIT)
```

---

## Python SDK

**Repository**: https://github.com/strata-systems/strata-python

PyO3-based bindings embedding the Rust library directly in a Python native extension. No network hop, no serialization overhead beyond the Python/Rust boundary.

- Pythonic API with type hints throughout
- NumPy integration for vector operations (accept/return `np.ndarray`)
- pip-installable with maturin build system
- 1:1 mapping to the Strata public API

```python
from stratadb import Strata

db = Strata.open("/data")
db.kv_put("user:123", "Alice")
db.fork_branch("experiment")
db.set_branch("experiment")

# Vectors with NumPy
import numpy as np
embedding = np.random.rand(384).astype(np.float32)
db.vector_upsert("docs", "doc-1", embedding)
```

### Package structure

```
strata-python/
├── Cargo.toml        # PyO3 dependency, git dep on stratadb
├── src/
│   └── lib.rs        # PyO3 module: #[pyclass] Strata, #[pymethods]
├── python/
│   └── stratadb/
│       └── __init__.py
├── pyproject.toml    # maturin build configuration
├── README.md
└── tests/
    └── test_strata.py
```

---

## Node.js SDK

**Repository**: https://github.com/strata-systems/strata-node

NAPI-RS bindings. TypeScript-first with full type definitions, npm-installable with prebuilt binaries.

```typescript
import { Strata } from 'stratadb';

const db = Strata.open('/data');
db.kvPut('user:123', 'Alice');
db.forkBranch('experiment');
db.setBranch('experiment');

// Vectors with arrays
const embedding = [0.1, 0.2, 0.3, ...];
db.vectorUpsert('docs', 'doc-1', embedding);
```

- camelCase method names (JS convention) mapping to snake_case Rust
- Full TypeScript definitions included
- npm-installable with prebuilt binaries via `@napi-rs/cli`

### Package structure

```
strata-node/
├── Cargo.toml          # napi-rs dependency, git dep on stratadb
├── build.rs            # napi-build setup
├── src/
│   └── lib.rs          # NAPI module
├── index.js            # Module entry point
├── index.d.ts          # TypeScript definitions
├── package.json
├── README.md
└── __tests__/
    └── strata.test.js
```

---

## API Coverage

Both SDKs expose all six Strata primitives:

| Primitive | Python Methods | Node Methods |
|-----------|----------------|--------------|
| **KV Store** | `kv_put`, `kv_get`, `kv_delete`, `kv_list`, `kv_history` | `kvPut`, `kvGet`, `kvDelete`, `kvList`, `kvHistory` |
| **State Cell** | `state_set`, `state_get`, `state_init`, `state_cas` | `stateSet`, `stateGet`, `stateInit`, `stateCas` |
| **Event Log** | `event_append`, `event_get`, `event_list`, `event_len` | `eventAppend`, `eventGet`, `eventList`, `eventLen` |
| **JSON Store** | `json_set`, `json_get`, `json_delete`, `json_list` | `jsonSet`, `jsonGet`, `jsonDelete`, `jsonList` |
| **Vector Store** | `vector_upsert`, `vector_get`, `vector_delete`, `vector_search`, `vector_create_collection`, `vector_delete_collection`, `vector_list_collections` | `vectorUpsert`, `vectorGet`, `vectorDelete`, `vectorSearch`, `vectorCreateCollection`, `vectorDeleteCollection`, `vectorListCollections` |
| **Branches** | `create_branch`, `fork_branch`, `set_branch`, `list_branches`, `delete_branch`, `diff_branches`, `merge_branches` | `createBranch`, `forkBranch`, `setBranch`, `listBranches`, `deleteBranch`, `diffBranches`, `mergeBranches` |
| **Spaces** | `set_space`, `list_spaces`, `delete_space`, `current_space` | `setSpace`, `listSpaces`, `deleteSpace`, `currentSpace` |
| **Database** | `ping`, `info`, `flush`, `compact` | `ping`, `info`, `flush`, `compact` |

---

## Why SDKs are boring (by design)

Both SDKs are thin wrappers around the stratadb Rust crate. No SDK reimplements validation, transaction coordination, branch resolution, or error handling. All business logic lives in the core.

## Testing strategy

Rust-side correctness is covered by 576+ tests. SDK tests verify the binding layer — types cross the FFI boundary correctly, errors propagate. Both SDKs have comprehensive test suites covering all primitives.

## Dependencies

- v0.5 (branch foundations + MCP) — public API stable before shipping SDKs
- `strata-security` (shipped in v0.4) — SDKs support `AccessMode`
