# v0.6: Python and Node SDKs

**Theme**: First-class language support for the two largest AI ecosystems.

SDKs ship right after MCP (v0.5.3) so Python and Node developers can use Strata immediately. Auto-embedding (v0.7) will be available when it ships.

---

## Python SDK

PyO3-based bindings embedding the Rust library directly in a Python native extension. No network hop, no serialization overhead beyond the Python/Rust boundary.

- Pythonic API: context managers for transactions, iterators for list/scan, type hints throughout
- NumPy integration for vector operations (accept/return `np.ndarray`)
- pip-installable with prebuilt wheels (manylinux, macOS, Windows)
- 1:1 mapping to the Strata public API — no Python-only features

```python
from stratadb import Strata

db = Strata.open("/data")
db.kv_put("user:123", "Alice")
db.fork_branch("main", "experiment")
db.set_branch("experiment")
results = db.search("what tools were used?")

# Transactions via context manager
with db.transaction():
    db.kv_put("a", "1")
    db.kv_put("b", "2")

# Vectors with NumPy
import numpy as np
embedding = np.random.rand(384).astype(np.float32)
db.vector_upsert("docs", "doc-1", embedding)
```

### Package structure

```
sdks/python/
├── Cargo.toml        # PyO3 dependency, links strata-executor
├── src/
│   └── lib.rs        # PyO3 module: #[pyclass] Strata, #[pymethods]
├── python/
│   └── stratadb/
│       ├── __init__.py
│       └── py.typed   # PEP 561 marker
├── pyproject.toml
└── tests/
    └── test_strata.py
```

---

## Node.js SDK

NAPI-RS bindings. TypeScript-first with full type definitions, async/await API, npm-installable with prebuilt binaries.

```typescript
import { Strata } from 'stratadb';

const db = await Strata.open('/data');
await db.kvPut('user:123', 'Alice');
await db.forkBranch('main', 'experiment');
await db.setBranch('experiment');

const results = await db.search('what tools were used?');

// Vectors with typed arrays
const embedding = new Float32Array(384);
await db.vectorUpsert('docs', 'doc-1', embedding);
```

- camelCase method names (JS convention) mapping to snake_case Rust
- `Buffer` support for binary values
- npm-installable with prebuilt binaries via `@napi-rs/cli`

### Package structure

```
sdks/node/
├── Cargo.toml          # napi-rs dependency, links strata-executor
├── src/
│   └── lib.rs          # NAPI module
├── index.d.ts          # TypeScript definitions
├── package.json
└── __tests__/
    └── strata.test.ts
```

---

## Why SDKs are boring (by design)

The `strata-executor` crate defines a `Command` enum (50+ variants) and an `Output` enum. Every operation is a serializable command in, serializable output out. No SDK reimplements validation, transaction coordination, branch resolution, or error handling. That all lives in the executor.

## Testing strategy

Rust-side correctness is covered by 576+ tests. SDK tests verify the binding layer — types cross the FFI boundary correctly, errors propagate, async behaves properly. The same black-box test scenarios can be implemented across Python, Node, and MCP for parity.

## Dependencies

- v0.5 (branch foundations + MCP) — public API stable before shipping SDKs
- `strata-security` (already shipped) — SDKs support `AccessMode`
