# v0.7: Observability

**Theme**: Production operations and monitoring.

Running StrataDB in production requires visibility into performance, resource usage, and operational health. v0.7 adds the instrumentation needed for production deployments.

## Features

### Structured Logging

Consistent, machine-readable log output.

- `tracing` crate is already a workspace dependency
- Add `tracing` spans and events to key code paths: transaction lifecycle, WAL writes, snapshot creation, compaction, search
- Configurable log levels per subsystem
- JSON log format option for log aggregation pipelines

### Metrics Export

Expose operational metrics in standard formats.

- Prometheus-compatible `/metrics` endpoint (server mode) or pull-based API (embedded)
- Key metrics: operations/sec by primitive, transaction commit/abort rates, WAL write latency, snapshot duration, search latency percentiles, active branch count
- Histogram buckets for latency distributions

### Performance Profiling

Detailed per-operation timing breakdowns.

- `perf-trace` feature flag already exists with `PerfTrace` infrastructure
- `PerfBreakdown` and `PerfStats` types exist in `crates/engine/src/instrumentation.rs`
- Extend to cover all layers: executor dispatch, engine transaction, storage read/write, WAL append
- On-demand profiling that can be enabled without restart

### Health Checks

Standardized health and readiness signals.

- Liveness check: process is running and responsive
- Readiness check: database is open, WAL is writable, recovery is complete
- Diagnostic endpoint: version, uptime, branch count, storage usage summary
- Useful for container orchestration (Kubernetes probes)

### Backup and Restore Tooling

Production-grade backup beyond branch bundles.

- Full database backup (all branches, WAL, snapshots) as a single archive
- Incremental backup (only changes since last backup)
- Point-in-time restore from backup + WAL replay
- Backup verification (integrity check without full restore)

## Context

Observability is often deferred but is critical for production confidence. Shipping it before v1.0 ensures that stability claims are backed by measurable evidence.

## Dependencies

- v0.6 (server mode) -- metrics endpoint and health checks are server features
- Can partially ship observability for embedded mode independently
